<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Portal 2B</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
body{background:#000;color:#fff}

/* LOGIN */
#loginPage{min-height:100vh;display:flex;justify-content:center;align-items:center}
.box{width:340px;padding:30px;background:#0b0b0b;border-radius:15px;box-shadow:0 0 25px #ffd700}
h2{color:#ffd700;text-align:center;margin-bottom:20px}
input,button{width:100%;padding:10px;margin:8px 0;border-radius:6px;border:none}
input{background:#111;color:#fff}
button{background:#ffd700;font-weight:bold;cursor:pointer}

/* PORTAL */
#portal{display:none}
nav{display:flex;justify-content:space-between;padding:15px;border-bottom:1px solid #333}
.menu button{background:none;color:#ccc}
.menu button.active{color:#ffd700}

.section{display:none;padding:20px}
.section.active{display:block}

.card{
  border:1px solid #333;
  padding:10px;
  margin:10px 0;
  border-radius:8px;
}
.card small{color:#aaa}
.card button{
  background:#b91c1c;
  color:#fff;
  padding:5px;
  margin-top:5px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginPage">
  <div class="box">
    <h2>LOGIN</h2>
    <input id="user" placeholder="Usuário">
    <input id="pass" type="password" placeholder="Senha">
    <button onclick="login()">Entrar</button>
  </div>
</div>

<!-- PORTAL -->
<div id="portal">
  <nav>
    <h1 style="color:#ffd700">Portal 2B</h1>
    <div class="menu">
      <button class="active" onclick="show('publica',this)">Área Pública</button>
      <button onclick="show('meus',this)">Meus Projetos</button>
      <button onclick="show('add',this)">Adicionar</button>
      <button onclick="logout()">Sair</button>
    </div>
  </nav>

  <!-- ÁREA PÚBLICA -->
  <div id="publica" class="section active">
    <h2>Projetos da Sala</h2>
    <div id="listaPublica"></div>
  </div>

  <!-- MEUS PROJETOS -->
  <div id="meus" class="section">
    <h2>Meus Projetos</h2>
    <div id="listaMeus"></div>
  </div>

  <!-- ADICIONAR -->
  <div id="add" class="section">
    <h2>Adicionar Projeto</h2>
    <input id="nome" placeholder="Nome do projeto">
    <input id="desc" placeholder="Descrição">
    <button onclick="salvarProjeto()">Salvar</button>
  </div>
</div>

<script>
const ADMIN = "professor";
const ADMIN_PASS = "1234";
let usuarioAtual = "";

// LOGIN
function login(){
  let u = user.value;
  let p = pass.value;

  if(!u || !p) return alert("Preencha tudo");

  if(u === ADMIN && p === ADMIN_PASS){
    usuarioAtual = ADMIN;
  }else{
    let contas = JSON.parse(localStorage.getItem("contas")) || {};
    if(contas[u] !== p) return alert("Login inválido");
    usuarioAtual = u;
  }

  localStorage.setItem("logado", usuarioAtual);
  entrar();
}

// ENTRAR
function entrar(){
  loginPage.style.display="none";
  portal.style.display="block";
  carregarPublica();
  carregarMeus();
}

// SALVAR PROJETO
function salvarProjeto(){
  let projetos = JSON.parse(localStorage.getItem("projetos")) || {};
  if(!projetos[usuarioAtual]) projetos[usuarioAtual]=[];

  projetos[usuarioAtual].push({
    nome:nome.value,
    desc:desc.value
  });

  localStorage.setItem("projetos",JSON.stringify(projetos));
  nome.value=""; desc.value="";
  carregarMeus();
  carregarPublica();
}

// MEUS PROJETOS
function carregarMeus(){
  let projetos = JSON.parse(localStorage.getItem("projetos")) || {};
  listaMeus.innerHTML="";

  (projetos[usuarioAtual]||[]).forEach((p,i)=>{
    listaMeus.innerHTML+=`
      <div class="card">
        <strong>${p.nome}</strong>
        <p>${p.desc}</p>
        <button onclick="excluir('${usuarioAtual}',${i})">Excluir</button>
      </div>
    `;
  });
}

// ÁREA PÚBLICA
function carregarPublica(){
  let projetos = JSON.parse(localStorage.getItem("projetos")) || {};
  listaPublica.innerHTML="";

  for(let aluno in projetos){
    projetos[aluno].forEach((p,i)=>{
      listaPublica.innerHTML+=`
        <div class="card">
          <strong>${p.nome}</strong>
          <p>${p.desc}</p>
          <small>Aluno: ${aluno}</small>
          ${usuarioAtual===ADMIN ? `<button onclick="excluir('${aluno}',${i})">Excluir</button>` : ""}
        </div>
      `;
    });
  }
}

// EXCLUIR (admin pode tudo)
function excluir(dono,index){
  let projetos = JSON.parse(localStorage.getItem("projetos"));
  projetos[dono].splice(index,1);
  localStorage.setItem("projetos",JSON.stringify(projetos));
  carregarMeus();
  carregarPublica();
}

// ABAS
function show(id,btn){
  document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  document.querySelectorAll(".menu button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
}

// LOGOUT
function logout(){
  localStorage.clear();
  location.reload();
}

// AUTO LOGIN
if(localStorage.getItem("logado")){
  usuarioAtual = localStorage.getItem("logado");
  entrar();
}
</script>

</body>
</html>
